## Abstract Factory Pattern

<small>| **한 줄 소개** | 구체적인 클래스에 의존하지 않고 서로 연관되거나 의존적인 객체들의 조합을 만드는 인터페이스를 제공하는 패턴 </small>

<br/>


팩토리 메서드를 확장. 팩토리 메서드보다 좀 더 큰 그룹 단위 객체를 생성 관리. 팩토리에 인터페이스를 적용하여 객체 생성. 팩토리를 팩토리의 군(family)으로 변경

<br/>

### 패턴 비교

팩토리 vs 팩토리 메서드 패턴 & 추상 팩토리 패턴 : 추상화의 차이. 팩토리 메서드와 추상팩토리는 팩토리 패턴을 추상화함으로써 클래스의 **선언**과 **구현**을 분리

팩토리 메서드 패턴 vs 추상 팩토리 패턴 : 추상화된 그룹을 형성하고 관리

<br/><br/>

### 추상화

추상 클래스의 상속은 하위 클래스에서 구체적 행위를 규정하는 선언임. 상위 클래스의 내용을 포함하는 객체의 확장하는 일반적인 상속과는 구별

추상화는 인터페이스의 특징을 이용해 실제적 객체의 생성 동작을 하위 클래스로 위임하고, 하위 클래스는 상위 추상 클래스에서 선언된 인터페이스에 따라 메서드를 구현

<br/>

**그룹화**

추상 팩터리는 여러 개의 **팩토리 메서드**를 그룹으로 묶은 것과 유사

추상 팩토리는 복수의 팩토리 메서드 패턴을 경합하여 하나의 가상화된 객체 생성군을 형성함

추상 팩토리는 좀 더 크고 복잡한 객체군을 만들 수 있음

특히 추상 팩토리는 가상화 그룹을 2개 이상 처리하고, 사용하는 목적은 복수의 객체 생성을 담당하는 군집을 관리하는 것

<br/>

**그룹 추가**

팩토리 메서드는 단일 그룹을 관리하지마 추상 패토리는 복수의 그룹을 관리할 수 있음

추상 팩토리에서 새로운 그룹을 만드는 것은 객체의 생산 공장을 추가하는 것과 같음


상위 추상 클래스를 상속받을 하위 클래스를 추가로 생성하고, 추상 클래스에서 정의한 인터페이스 규격에 맞게 새로운 그룹의 내용을 구현함

하위 클래스는 추상화 규약에 따라 실제 처리 로직을 자유롭게 작성하고, 추상화는 인터페이스와 같이 별도의 로직을 정의하지 않음. 이런 특징이 적용되어 독립된 그룹을 형성할 수 있음

<br/>

**속성 변경**

추상클래스의 경우 그룹을 나누는 것은 쉽지만 서브 생성 객체를 추가하는 것은 어려움

하나의 패턴이 문제를 완벽하게 해결할 수 있는 것은 아님. 패턴을 적용할 때는 장단점을 잘 파악하여 적절하게 사용하는 것이 중요


<br/><br/>

### 다형성을 이용한 군집 형성

추상화는 다형성을 적용해 여러 개의 하위 클래스를 생성할 수 있음

팩토리 메서드는 추상 클래스와 하위 클래스를 1개로만 구성하는 반면, 추상 팩토리는 **다형성을 적극적으로 활용**하여 다수의 하위 클래스를 생성하고 관리하는 것이 특징

상속을 통해 다형성을 적용한다는 것은 하위 클래스가 하나의 군으로 형성될 수 있다는 것

추상 팩토리는 추상화의 다형성을 이용해 객체 생성군을 형성하고 집합 단위의 객체 생성을 관리할 수 있음. 

(즉 추상화와 상속을 극대화해 다형성의 특징을 응용)

<br/><br/>

### 목적성

추상 팩토리는 특정 클래스에 의존하지 않음. 해결해야 하는 문제에 따라 객체 생성 그룹을 만들고 다양한 문제에 따라 새로운 객체를 생성해 그룹을 추가

해결해야 할 주제가 변할 때마다 목적에 따른 그룹을 변경하여 적용함. 하지만 각각의 그룹들은 서로 호환성을 가지며 동일한 인터페이스에 의해 호출됨


<br/><br/>

## 장단점

### 장점

추상 팩토리는 생성 패턴을 독립적으로 동작하도록 분리하며 분리된 하나의 그룹별로 객체를 성택하여 생성함.

추상 팩토리의 그룹은 동일한 처리 로직을 갖고 있고, 다른 그룹으로 변경돼도 하위 클래스를 통해 선택적 객체를 다르게 생성할 수 있음

추상 팩토리는 큰 변화없이 시스템의 군을 생성하고 변경할 수 있음

추상패토리의 일부는 인터페이스와 같은 역할을 함 

코드를 일관적으로 유지하고 실제 구현을 다르게 실행시킬 수 있다는 장점을 갖고 있음

<br/>

**프로젝트의 규모**

프로젝트의 규모가 커질수록 클래스 파일과 관리할 객체 수가 많아지는데, 팩토리 패턴이나 팩토리 메서드 패턴을 사용하여 필요한 객체 생성을 한 곳으로 모은 후 관리하는 것이 편리함

규모에 따라 하나의 생성 패턴으로 모든 객체를 생성 처리하는 것이 힘들 수 있음

<br/><br/>

### 단점

추상 팩토리의 경우 새로운 종류의 군을 추가하는 것이 쉽지 않음 이는 기존 군에서 새로운 군을 추가하여 확장할 때 모든 서브 클래스들이 동시에 변경돼야 하는 추상 팩토리의 특징 때문

새로운 클래스 제품군이 추가되면 클래스 제품에 대한 구조를 설계하고, 이를 다시 추상 팩토리의 구조에 등록해야 함. 매번 새로운 종류를 추가할 때마다 구조를 재설계하는 것은 확장성 부분에서 좋지 않음

추상 팩토리 그룹은 계층적 구조를 가지며 계층으 ㄹ확장하면서 그룹을 관리함

추상 팩토리는 팩토리 메서드와 매우 비슷하지만 관리할 그룹이 많다는 차이가 있음. 또한 계층의 크기가 커질수록 복잡한 문제가 발생함

<br/><br/>

## 관련 패턴

<br/>

### 빌더 패턴

추상 팩토리는 인터페이스를 이용하여 객체를 조립하지만, 빌더는 더 크고 복잡한 객체를 조립하거나 생성할 때 사용됨

<br/>

### 팩토리 메서드 패턴

추상 팩토리는 팩토리 메서드를 더욱 확장함

생성 패턴을 그룹화하여 단위별로 객체 생성하며 객체를 조립하는 과정에서 팩토리 메서드 패턴이 응용됨

<br/>

### 복합체 패턴

추상 팩토리는 추상화를 통해 객체 생성을 조합함. 조합된 객체는 복합 객체의 특징을 가짐

<br/>

### 싱글턴 패턴

유일한 객체 생성이 필요하다면 일부 객체는 싱글턴 방식으로 변경할 수 있음

싱글턴 패턴을 이용하면 중복을 배제하고 객체를 생성할 수 있음

<br/>

## 정리

추상 팩토리 패턴은 팩토리 메서드 패턴을 포함하며 팩토리 부분을 추상화해 그룹으로 확장함

비슷한 방식으로 객체를 생성할 때 적용하면 좋은 패턴

생성된 그룹을 통해 전체를 쉽게 변경할 수도 있음

추상 팩토리는 객체 생성 과정이 프로세스 공정과 같음

