# CHAPTER 15. Postmortem Culture: Learning from Failure

<small><i>포스트모텀 문화: 실패로부터 배우기</i></small>

**포스트모텀**: 장애의 발생 기록과 그 영향, 장애를 완화하거나 해결하기 위해 수행한 작업, 장애의 근본 원인, 그리고 향후 재발 방지를 위한 후속 조치 등이 기록된 문서

- 우리는 장애의 원인을 찾아 해결하고 서비스는 다시 정상적인 운영 상태로 복귀.
- 이런 장애들로부터 계속해서 학습할 수 있는 정규화된 절차를 갖지 않는다면 이런 장애들은 무한정 반복될 것.

<br>

## Google’s Postmortem Philosophy

<small><i>구글의 포스트모텀 철학</i></small>

#### 포스트모텀을 쓰는 이유

- 장애에 대한 내용을 문서화
- 장애가 발생하게 된 원인에 대해 이해
- 무엇보다 장애를 해결하기 위해 취한 조치들이 향후 장애의 재발 방지


✔️ **포스트모텀 ≠ 처벌** → 회사 전체가 실패로부터 새로운 것을 배울 수 있는 기회.

✔️ 포스트모텀 문서를 작성은 시간 · 노력이라는 비용 필요 → 심사숙고해서 써야 함.

<br>

#### 보통 포스트모텀은 다음과 같은 상황이 발생했을 때 수행

- 사용자가 다운타임을 경험했거나 신뢰성이 목표치 이하로 떨어진 경우.
- 종류에 관계없이 데이터 손실이 발생한 경우.
- 비상 대기 엔지니어의 중재가 발생한 경우 (릴리즈 롤백, 트래픽 재설정 등)
- 장애의 해결 시간이 목표치보다 오래 걸린 경우.
- 모니터링 장애 시 (주로 장애를 사람이 직접 발견한 경우)

<br>

✔️ **포스트모텀 문화 신조**: 서로를 비난하지 않는 문화

- 포스트모텀에서 서로의 비난을 방지하려면:
  - 개인 · 팀의 실수나 부적절한 조치가 아닌, **장애를 유발한 원인을 판단하는 데 집중**해야 함.
- 비난 없이 작성된 포스트모텀 문서를 위해서는:
  - 참여자의 모든 행동은 문제 해결의 의도로, 당시 자신들이 가진 모든 정보를 토대로 올바른 조치를 취한 것을 가정하고 작성해야함.

<br>

<pre>
실제로, 매우 치명적인 결과로 이어지기 쉬운 의료 산업(healthcare)과 항공 산업에서 먼저 생겨남.
이런 산업군들은 모든 실수를 시스템을 강화할 수 있는 기회로 보는 환경을 육성해 옴.
시스템의 어느 부분을 어떻게 개선할 수 있는지에 대한 결과를 도출해야 함.
</pre>

<br>

#### 포스트모텀 문화 예시

| 비난하는 문화                                                                        | 비난하지 않는 문화                                                                       |
|--------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
| "우리의 백엔드 시스템을 완전히 뜯어고쳐야 합니다! ... 앞으로 한 번만 더 장애 알림을 받게 되면 장담코 내가 다 뜯어고칠 겁니다..." | "... 현재 버전의 운영 매뉴얼은 너무 길고 완벽하게 학습하기가 어렵습니다. 시스템을 새로 작성하면 비상 대기 엔지니어들도 좋아할 거예요!"  |

> 🔖 **모범 사례**: 비난보다는 생산적인 포스트모텀 문서를 작성하는 방법
> 
> 누군가를 비난하지 않는 포스트모텀 문서를 작성하는 것은 어러움 - 장애를 유발시킨 모든 행위를 중심으로 명시하자.

<br>

### Collaborate and Share Knowledge

<small><i>협업과 지식의 공유</i></small>

**성공적인 포스트모텀을 위해, 다음의 핵심 기능들이 제공되어야 함**

- **실시간 협업**
  - 데이터와 아이디어를 실시간으로 신속하게 수집할 수 있음
  - 포스트모텀 문서 생성 초기에 매우 유용
- **열린 댓글/주석 시스템**
  - 집단 지성을 쉽게 활용하며 그 적용 범위를 넓힐 수 있음
- **이메일 알림**
  - 문서를 함께 편집 중인 사람들에게 메일 알림을 보내거나 혹은 다른 사람들의 추가 의견을 기대할 때 그 사람을 문서 편집자로 초대할 수 있음

<br>

**포스트모텀 문서를 가능한 많은 사람들과 공유함으로써 지식을 공유하는 것**

실질적으로 팀은 포스트모텀의 **첫 번째 초안을 내부적으로 공유**하여,
선임 엔지니어들이 초안을 검토하여 완성도를 높이도록 하는 방법을 취하는 것이 나음

<br>

### Introducing a Postmortem Culture

<small><i>포스트모텀 문화 도입하기</i></small>

특정인을 비방하지 않는 포스트모텀은 스스로 동기를 부여하는 엔지니어의 산출물로써 태어나는 것이 이상적.

- 이달의 포스트모텀
  - 전체 조직에 공유된 포스트모텀 문서 중 잘 정리된 사례를 선정하여 월간 소식지를 통해 공지.
- 구글 플러스 포스트모텀 그룹
  - 이 그룹은 내부 및 외부 포스트모텀과 모범 사례, 그리고 포스트모텀에 대한 해설을 공유.
- 포스트모텀 읽기 클럽(reading club)
  - 여러 팀들이 정기적으로 포스트모텀 읽기 클럽을 주관.

<br>

**불행의 바퀴(wheel of misfortune)**

: 이전의 포스트모텀 중 하나를 선정해서 엔지니어들이 그 안에 기록된 대로 역할을 수행해 보는 것. 

새로 입사한 SRE들은 종종 불행의 바퀴 연습을 수행.

이때 가능한 한 '실제와 같은' 경험을 위해 당시 장애 제어를 담당했던 사람이 함께 참여.

- 포스트모텀을 작업의 일부로 편입시킴
  - 일정한 시범 기간을 거쳐 성공적인 포스트모텀 문서를 작성해 보면 그 가치를 입증할 수 있음.
  - 게다가 포스트모텀을 어떤 경우에 작성할 것인지를 결정하는 데도 도움이 됨
- 앞서 언급한 사회적 방법들을 통해 공개적으로 축하
- 선임 리더들의 관심과 참여 독려
  
Lary Page 도 포스트모텀의 높은 가치를 언급

<br>

> 🔖 **모범사례: 포스트모텀의 효과에 대한 피드백을 구하자**
>
> 정기적으로 각 팀에 설문을 보내 포스트모텀 절차가 목표를 달성하는 데 도움이 되었는지, 그리고 이 절차를 개선할 수 있는 방법이 있는지를 물음
>
> 매너리즘에 빠진 SRE들에게 포스트모텀 문화의 효율성을 향상시킬 수 있는 다양한 개선점들을 확인할 수 있는 기회가 됨

<br>

### Conclusion and Ongoing Improvements

<small><i>결론 및 지속적인 개선</i></small>

덕분에 장애는 줄어들고 더 나은 사용자 경험을 제공할 수 있게 되었음을 자신 있게 말할 수 있음

머신 러닝(Machine Learning)을 도입하여 우리의 취약점을 예측하고 실시간 장애 조치를 더 쉽게 하며, 

장애가 중복해서 발생할 가능성을 줄이는 데 집중할 예정

