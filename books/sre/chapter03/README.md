# CHAPTER 03. Embracing RiskEmbracing Risk

<i>위험 요소 수용하기</i>

## Managing Risk

- 시스템의 신뢰성을 높이는 데 소요되는 비용은 비례해서 증가하지 않음
- 때로는 신뢰성을 향상시키는 것이 비용을 100배 증가시키기도 함

**비용 증가 요소**:
1. **여분의 컴퓨트 자원 비용**: 데이터 정합성을 보장하기 위해 필요한 패리티코드(parity code) 블록을 저장할 수 있는 공간을 확보하기 위한 추가 장비 비용
2. **기회 비용**: 위험을 대비하기 위해 시스템이나 기능을 구현하는 데 소요되는 비용

## Measuring Service Risk

하나의 지표만으로 서비스 위험 요소를 완전히 파악하기 어려움

서비스 장애는 사용자 불만, 신뢰성 하락, 수익 감소, 브랜드 가치 손상, 언론 보도 등의 잠재적 영향을 초래할 수 있음

이러한 요소 중 일부는 측정하기 어려움.

구글은 의도되지 않은 다운타임에 중점을 두어 전체 시스템의 일관성을 높임.

**시간 기준 가용성**

> 가용성 = 업타임 / (업타임 + 다운타임)

하지만 구글은 전 세계에 분산된 서비스를 운영하기 때문에 시간 기준 가용성 지표는 의미가 없음
그래서 업타임 관련 지표들 대신 요청 성공률 (request success rate)에 기초한 가용성을 정의

**종합 가용성**

> 가용성 = 성공한 요청 수 / 전체 요청 수

<br>

## Risk Tolerance of Services / 서비스의 위험 수용도

서비스의 위험 수용도는 제품이나 서비스의 기본 정의에 포함되어 있으며, 제품 소유자와의 협의를 통해 기업의 목표를 명확히 설정해야 함.

**소비자 대상 서비스의 위험 수용도 정의**:

- 어느 정도 수준의 위험 수용도가 요구되는가?
- 장애의 종류에 따라 서비스에 미치는 영향이 달라지는가?
- 어느 지점에서 위험 대비 비용을 투입할 것인가?
- 고려해야 할 다른 서비스 지표는 무엇인가?

**목표 가용성 수준**:

- 사용자가 기대하는 서비스 수준은 무엇인가?
- 이 서비스가 수익과 직접적으로 연관이 있는가?
- 유료 서비스인가, 무료 서비스인가?
- 경쟁자는 어느 정도 수준의 가용성을 제공하는가?
- 서비스가 개인 사용자 또는 기업 사용자를 대상으로 하는가?

**장애의 종류**:

- 우리의 사업은 서비스의 다운타임에 얼마나 능동적으로 대처할 수 있는가?
- 지속적인 소규모 장애와 드물지만 큰 장애 중 어느 쪽이 서비스에 더 유리한가?

**비용**:

- 상향된 목표 가용성 수준이 수익에 미치는 긍정적 영향은 무엇인가?
- 추가 수익이 목표 가용성 수준을 달성하기 위한 비용을 상쇄할 수 있는가?

**기타 서비스 지표**:
- 서비스의 가용성과 위험 수용도 지표 사이의 관계
- etc

## Motivation for Error Budgets / 에러 예산 활용해보기

**소프트웨어 결함 허용**:

- 예상치 못한 이벤트 발생 시 소프트웨어의 유연성을 어느 정도 확보해야 할까?
- 결함을 너무 허용하지 않으면 융통성이 없고 사용성이 떨어지는 제품이 되며, 너무 많이 허용하면 사용자가 없는 제품이 될 것
- 테스트가 부족하면 예상치 못한 결함, 개인정보 유출 등 심각한 문제가 발생할 수 있고, 반면에 테스트가 과도하면 시장 진출 기회를 놓칠 수 있음

**출시 빈도**:

- 새로운 코드를 출시하는 것은 항상 위험을 감수하는 일
- 위험 부담을 줄이는 것과 다른 작업을 수행하는 것의 균형을 맞추는 방법이 중요함

**카나리 테스트 빈도와 규모**:

- 카나리 테스트는 새로운 코드를 일부 구간에만 시범 도입하여 테스트하는 방법으로, 모범 사례로 널리 알려짐
- 카나리 테스트의 기간과 규모는 얼마나 되어야 할까?

<br/><br/>